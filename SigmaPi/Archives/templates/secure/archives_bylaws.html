{% extends 'secure/archives_base.html' %}
{% block title %}Sigma Pi Secure - Archives - Bylaws {% endblock %}

{% block content %}
	<h1 class="ui header">Bylaws
		{% if perms.Archives.add_bylaws %}
		<a class="ui teal button" href="{% url 'Archives.views.create_bylaw' %}">Add Bylaws</a>
		{% endif %}
	</h1>  

	{% if bylaws %}

		<table id="bylaws_table" class="ui basic table segment">
			<thead>
				<tr>
					<th class="four wide">Date</th>
					<th class="one wide">View</th>
					{% if perms.Archives.delete_bylaws %} <th class="one wide">Delete</th> {% endif %}
				</tr>
			</thead>
			<tbody>
				{% for bylaw in bylaws %}
				<tr>
					<td>{{ bylaw.date }}</td>
					<td>
						<a href="{{ bylaw.filepath.url }}">View</a>
					</td>
					{% if perms.Archives.delete_bylaws %}
					<td>
						<form method="post" action="{% url 'Archives.views.delete_bylaw' %}">
							{% csrf_token %}
							<a href="#" onclick="$(this).closest('form').submit()">Delete</a>
							<input type="hidden" name="post_id" value="{{ bylaw.pk }}"/>
						</form>
					</td>
					{% endif %}
				</tr>
				{% endfor %}
			</tbody>
		</table>
		<script type="text/javascript">
			$(document).ready(function() {
				$.fn.dataTableExt.oStdClasses["sFilter"] = "ui label black"
				$.fn.dataTableExt.oStdClasses["sLength"] = "ui label black"
				$.fn.dataTableExt.oStdClasses["sInfo"] = "ui message"
				$.fn.dataTableExt.oStdClasses["sPagePrevEnabled"] = "ui button active"
				$.fn.dataTableExt.oStdClasses["sPagePrevDisabled"] = "ui button disabled"
				$.fn.dataTableExt.oStdClasses["sPageNextEnabled"] = "ui button active"
				$.fn.dataTableExt.oStdClasses["sPageNextDisabled"] = "ui button disabled"
				$('#bylaws_table').dataTable();
			} );
		</script>
	{% else %}
	No bylaws found. Check back later.
	{% endif %}
{% endblock %}